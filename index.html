<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rugby Tournament</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 10px; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
<h1>Rugby Tournament Fixtures & Results</h1>
<table id="fixtures">
    <thead>
    <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Team 1</th>
        <th>Score</th>
        <th>Team 2</th>
        <th>Score</th>
    </tr>
    </thead>
    <tbody>
    <!-- Matches will be loaded here -->
    </tbody>
</table>

<h2>League Table</h2>
<table id="league-table">
    <thead>
    <tr>
        <th>Team</th>
        <th>Played</th>
        <th>Won</th>
        <th>Drawn</th>
        <th>Lost</th>
        <th>Points</th>
    </tr>
    </thead>
    <tbody>
    <!-- League table will be populated here -->
    </tbody>
</table>

<script>
    async function loadMatches() {
        try {
            const response = await fetch('matches.json');
            const data = await response.json();
            const tableBody = document.querySelector('#fixtures tbody');
            tableBody.innerHTML = '';
            const standings = {};

            data.teams.forEach(team => {
                standings[team] = { played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
            });

            data.matches.forEach(match => {
                const row = document.createElement('tr');
                row.innerHTML = `
                        <td>${match.date}</td>
                        <td>${match.time}</td>
                        <td>${match.team1}</td>
                        <td>${match.score1 !== null ? match.score1 : '-'}</td>
                        <td>${match.team2}</td>
                        <td>${match.score2 !== null ? match.score2 : '-'}</td>
                    `;
                tableBody.appendChild(row);

                if (match.score1 !== null && match.score2 !== null) {
                    standings[match.team1].played++;
                    standings[match.team2].played++;

                    if (match.score1 > match.score2) {
                        standings[match.team1].won++;
                        standings[match.team2].lost++;
                        standings[match.team1].points += 3;
                    } else if (match.score1 < match.score2) {
                        standings[match.team2].won++;
                        standings[match.team1].lost++;
                        standings[match.team2].points += 3;
                    } else {
                        standings[match.team1].drawn++;
                        standings[match.team2].drawn++;
                        standings[match.team1].points += 1;
                        standings[match.team2].points += 1;
                    }
                }
            });

            const tableStandings = document.querySelector('#league-table tbody');
            tableStandings.innerHTML = '';

            Object.entries(standings).sort((a, b) => b[1].points - a[1].points).forEach(([team, stats]) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                        <td>${team}</td>
                        <td>${stats.played}</td>
                        <td>${stats.won}</td>
                        <td>${stats.drawn}</td>
                        <td>${stats.lost}</td>
                        <td>${stats.points}</td>
                    `;
                tableStandings.appendChild(row);
            });
        } catch (error) {
            console.error('Error loading matches:', error);
        }
    }
    loadMatches();
</script>
</body>
</html>
